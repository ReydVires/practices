window.APP=window.APP||function(e){"use strict";var i="1.0.0",t={},d="Calculator",r="constMap",n="DOMContentLoaded",l="memoryLabel",o="digitsField",a="operationField",s="Cannot parse parameter value. It must be in a string format!",F="The given module does not contain constants map!";return{operation:"",operand:0,operandStr:"",memory:"",result:"",memoryLabelField:{},digitsField:{},dgField:"",operationField:{},opField:"",eraseDigits:!0,constMap:{CONST_MAP_STR:function(){return r},DOM_CONTENT_LOADED_EVENT_STR:function(){return n},APP_NAME:function(){return d}},appConfiguration:function(){return t},getVersion:function(){return i},arrayContains:function(e,i){for(var t=0,d=!1;!d;)e[t]===i?d=!0:t+=1;return d},getConst:function(e){var i=[],t=this,d=1,n={};if("string"==typeof e)if(i=e.split("."),this.arrayContains(i,r)!==!1){for(;i[d]!==r;)t=t[i[d]],d+=1;n=t.Constants.get(i[i.length-1])}else n=F;else n=s;return n},listContants:function(e){var i=[],t=this,d=1,r="";if("string"==typeof e){for(i=e.split("."),d=1;d<i.length;d+=1)t=t[i[d]];t.Constants.list(),r=!0}else r=s;return r},printData:function(){var e={operation:this.operation,operand:this.operand,operandStr:this.operandStr,memory:this.memory,result:this.result,digitsField:this.digitsField,dgField:this.dgField,operationField:this.operationField,opField:this.opField};return e},Constants:function(e){var i={},t=Object.prototype.hasOwnProperty,d={string:1,number:1,"boolean":1},r=(Math.random()+"_").slice(2);return{constMap:e,set:function(e,n){return this.isDefined(e)?!1:t.call(d,typeof n)?(i[r+e]=n,this.constMap[e]=e,!0):!1},isDefined:function(e){return t.call(i,r+e)},get:function(e){return this.isDefined(e)?i[r+e]:null},list:function(){var e=0,t="",d="",r={};for(d in i)i.hasOwnProperty(d)&&(e=d.indexOf("_"),t=d.substr(e+1),r[t]=i[d]);return r}}},namespace:function(e,i){var t=e.split("."),d=this,r={},n=0,l={};for(r.constMap={},r.Constants=new this.Constants(r.constMap),t[0]===this.constMap.APP_NAME()&&(t=t.slice(1)),n=0;n<t.length;n+=1){if(void 0===d[t[n]]){for(l in i)i.hasOwnProperty(l)&&(l===l.toUpperCase()?"function"!=typeof i[l]?r.Constants.set(l,i[l]):r.constMap[l]=i[l]:r[l]=i[l]);d[t[n]]=r}d=d[t[n]]}return d},init:function(i){try{return t=i,this.memoryLabelField=e.getElementById(l),this.digitsField=e.getElementById(o),this.digitsField.value="0",this.operationField=e.getElementById(a),this.operationField.value="",this}catch(d){return d}},myParseInt:function(e){return parseInt(e,10)},myParseFloat:function(e){return parseFloat(e,10)}}}(window.document),window.document.addEventListener(window.APP.constMap.DOM_CONTENT_LOADED_EVENT_STR(),function(e){"use strict";window.APP.init({event:e})}),window.APP.namespace("Main",function(){"use strict";var e="Invalid input!",i="Cannot divide by zero!";return{INVALID_INPUT_MESSAGE:function(){return e},CANNOT_DIVIDE_BY_ZERO_MESSAGE:function(){return i}}}()),window.APP.namespace("Aritmetic",function(){"use strict";var e=window.APP;return{divide:function(){""===e.result?e.result=e.dgField:"0"!==e.dgField?e.result=e.myParseFloat(e.result)/e.myParseFloat(e.dgField):e.dgField=e.Main.constMap.CANNOT_DIVIDE_BY_ZERO_MESSAGE(),e.opField+=e.dgField+" "+e.operation+" ",e.dgField=e.result},multiply:function(){e.result=""===e.result?e.dgField:e.myParseFloat(e.result)*e.myParseFloat(e.dgField),e.opField+=e.dgField+" "+e.operation+" ",e.dgField=e.result},add:function(){e.result=""===e.result?e.dgField:e.myParseFloat(e.result)+e.myParseFloat(e.dgField),e.opField+=e.dgField+" "+e.operation+" ",e.dgField=e.result},subtract:function(){e.result=""===e.result?e.dgField:e.myParseFloat(e.result)-e.myParseFloat(e.dgField),e.opField+=e.dgField+" "+e.operation+" ",e.dgField=e.result},percent:function(){var i=0,t=0,d=0,r="";""===e.result?(e.opField="0",e.dgField="0"):"0"===e.dgField||"0."===e.dgField?("0"!==e.opField.substr(e.opField.length-1)&&(e.opField=e.opField+"0"),e.dgField="0"):(i=e.myParseFloat(e.result),t=e.myParseFloat(e.dgField),d=t*i/100,r=e.operand.toString(),-1!==e.opField.indexOf(r)&&(e.opField=e.opField.substr(0,e.opField.indexOf(r))),e.opField+=d,e.operand=d,e.dgField=d)}}}()),window.APP.namespace("Buttons",function(){"use strict";var e=window.APP,i="MC",t="MR",d="MS",r="M+",n="M-",l="sqrt",o="1/x",a="+/-",s="+",F="-",u="*",p="/",g="%";return{pressNumber:function(i){e.dgField=e.digitsField.value,"0"===i?(("0"===e.dgField||e.eraseDigits)&&(e.dgField=""),e.dgField+="0"):(("0"===e.dgField||e.eraseDigits)&&(e.dgField=""),e.dgField+=i),e.eraseDigits=!1,e.digitsField.value=e.dgField},pressUnaryOperation:function(i){var t=0;switch(e.opField=e.operationField.value,e.dgField=e.digitsField.value,e.operand=e.myParseFloat(e.dgField),""!==e.operandStr&&(t=e.opField.indexOf(e.operandStr),-1!==t&&(e.opField=e.opField.slice(0,t))),i){case l:e.operandStr=""===e.operandStr?"sqrt("+e.operand+")":"sqrt("+e.operandStr+")",e.operand<0?e.dgField=e.constMap.INVALID_INPUT_MESSAGE():(e.dgField=Math.sqrt(e.operand),e.result=e.dgField);break;case o:e.operandStr=""===e.operandStr?"reciproc("+e.operand+")":"reciproc("+e.operandStr+")",0===e.operand?e.dgField=e.constMap.CANNOT_DIVIDE_BY_ZERO_MESSAGE():(e.dgField=1/e.operand,e.result=e.dgField);break;case a:""===e.result?"0"!==e.dgField&&(e.dgField=-1===e.dgField.indexOf("-")?"-"+e.dgField:e.dgField.substr(1)):"0"!==e.dgField&&(e.dgField=-1===e.dgField.indexOf("-")?"-"+e.dgField:e.dgField.substr(1),e.operandStr=""===e.operandStr?"negate("+e.operand+")":"negate("+e.operandStr+")")}e.opField+=e.operandStr,e.operationField.value=e.opField,e.digitsField.value=e.dgField},pressBinaryOperation:function(i){switch(e.dgField=e.digitsField.value,e.opField=e.operationField.value,i!==g&&(e.operation=i),e.eraseDigits=!0,i){case p:e.Aritmetic.divide();break;case u:e.Aritmetic.multiply();break;case s:e.Aritmetic.add();break;case F:e.Aritmetic.subtract();break;case g:e.Aritmetic.percent()}e.digitsField.value=e.dgField,e.operationField.value=e.opField},pressComma:function(){e.dgField=e.digitsField.value,-1===e.dgField.indexOf(".")&&(""===e.dgField?e.dgField="0.":e.dgField+=".",e.digitsField.value=e.dgField)},pressUndo:function(){e.dgField=e.digitsField.value,e.dgField=1===e.dgField.length?"0":e.dgField.substring(0,e.dgField.length-1),e.digitsField.value=e.dgField},pressClearEntry:function(){e.operand=0,e.digitsField.value="0"},pressClear:function(){e.operation="",e.operand=0,e.operandStr="",e.result="",e.digitsField.value="0",e.operationField.value=""},calculate:function(){e.dgField=e.digitsField.value,""!==e.result?(e.operation===s?e.Aritmetic.add():e.operation===F?e.Aritmetic.subtract():e.operation===u?e.Aritmetic.multiply():e.operation===p&&e.Aritmetic.divide(),e.result="",e.operation=""):e.result=e.dgField,e.digitsField.value=e.dgField},pressMemoryButton:function(l){switch(e.dgField=e.digitsField.value,l){case i:e.memoryLabelField.value="",e.memory="";break;case t:e.dgField=""===e.memory?"0":e.memory,e.digitsField.value=e.dgField,e.eraseDigits=!0;break;case d:"0"!==e.dgField||"0."!==e.dgField?(e.memory=e.dgField,e.memoryLabelField.value="M = "+e.dgField):e.digitsField.value="0",e.eraseDigits=!0;break;case r:""!==e.memory&&(e.memory=e.myParseFloat(e.memory)+e.myParseFloat(e.dgField),e.memoryLabelField.value="M = "+e.memory);break;case n:""!==e.memory&&(e.memory=e.myParseFloat(e.memory)-e.myParseFloat(e.dgField),e.memoryLabelField.value="M = "+e.memory)}},pressEqual:function(){this.calculate(),e.operationField.value="",e.operand=0}}}());